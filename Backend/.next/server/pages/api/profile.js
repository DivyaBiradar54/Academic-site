"use strict";(()=>{var e={};e.id=925,e.ids=[925],e.modules={3524:e=>{e.exports=require("@prisma/client")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},808:(e,r,s)=>{s.r(r),s.d(r,{config:()=>c,default:()=>u,routeModule:()=>p});var a={};s.r(a),s.d(a,{default:()=>handler});var t=s(1802),o=s(7153),n=s(6249),i=s(3524),l=s(5668);let d=new i.PrismaClient;async function handler(e,r){if(await (0,l.Z)(e,r),"GET"===e.method){let{userId:s}=e.query;try{if(!s)return r.status(400).json({message:"userId is required in query parameters."});let e=await d.profile.findFirst({where:{userId:parseInt(s)},include:{user:{select:{name:!0}}}});if(!e)return r.status(404).json({message:"Profile not found."});let a={id:e.id,email:e.email,academicBackground:e.academicBackground,researchInterests:e.researchInterests,collegeInfo:e.collegeInfo,name:e.user?.name};r.status(200).json(a)}catch(e){console.error("Error fetching profile:",e),r.status(500).json({message:"Internal server error."})}}else if("POST"===e.method){let{userId:s,password:a,email:t,academicBackground:o,researchInterests:n,collegeInfo:i}=e.body;try{if(!s||!t||!a)return r.status(400).json({message:"userId, email, and password are required in the request body."});let e=await d.profile.upsert({where:{userId:parseInt(s)},update:{password:a,email:t,academicBackground:o||"",researchInterests:n||"",collegeInfo:i||""},create:{userId:parseInt(s),password:a,email:t,academicBackground:o||"",researchInterests:n||"",collegeInfo:i||""}});r.status(200).json({message:"Profile updated successfully.",profile:e})}catch(e){console.error("Error updating profile:",e),r.status(500).json({message:"Internal server error."})}}else r.setHeader("Allow",["GET","POST"]),r.status(405).end(`Method ${e.method} Not Allowed`)}let u=(0,n.l)(a,"default"),c=(0,n.l)(a,"config"),p=new t.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/profile",pathname:"/api/profile",bundlePath:"",filename:""},userland:a})},5668:(e,r,s)=>{s.d(r,{Z:()=>corsMiddleware});let a=require("cors");var t=s.n(a);let o=t()({origin:"*",methods:["GET","POST","PUT","DELETE","OPTIONS"],allowedHeaders:["Content-Type","Authorization"]});async function corsMiddleware(e,r){await new Promise((s,a)=>{o(e,r,e=>e instanceof Error?a(e):s(e))})}}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[222],()=>__webpack_exec__(808));module.exports=s})();