"use strict";(()=>{var e={};e.id=27,e.ids=[27],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},8662:(e,r,s)=>{s.r(r),s.d(r,{config:()=>p,default:()=>c,routeModule:()=>m});var t={};s.r(t),s.d(t,{default:()=>handler});var a=s(1802),o=s(7153),n=s(6249);let i=require("nodemailer");var d=s.n(i),l=s(5668);let u=null;async function handler(e,r){if(await (0,l.Z)(e,r),"POST"===e.method){let{email:s}=e.body;if(!s)return r.status(400).json({message:"Email is required."});try{u=Math.floor(1e5+9e5*Math.random()).toString();let e=d().createTransport({service:"gmail",auth:{user:process.env.EMAIL_USER,pass:process.env.EMAIL_PASS}}),t={from:process.env.EMAIL_USER,to:s,subject:"Your OTP Code",text:`Your OTP code is: ${u}`};await e.sendMail(t),r.status(200).json({message:"OTP sent successfully."})}catch(e){console.error("Error sending OTP:",e),r.status(500).json({message:"Failed to send OTP."})}}else r.setHeader("Allow",["POST"]),r.status(405).end(`Method ${e.method} Not Allowed`)}let c=(0,n.l)(t,"default"),p=(0,n.l)(t,"config"),m=new a.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/send-otp",pathname:"/api/send-otp",bundlePath:"",filename:""},userland:t})},5668:(e,r,s)=>{s.d(r,{Z:()=>corsMiddleware});let t=require("cors");var a=s.n(t);let o=a()({origin:"*",methods:["GET","POST","PUT","DELETE","OPTIONS"],allowedHeaders:["Content-Type","Authorization"]});async function corsMiddleware(e,r){await new Promise((s,t)=>{o(e,r,e=>e instanceof Error?t(e):s(e))})}}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[222],()=>__webpack_exec__(8662));module.exports=s})();