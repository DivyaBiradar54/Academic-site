"use strict";(()=>{var e={};e.id=518,e.ids=[518],e.modules={3524:e=>{e.exports=require("@prisma/client")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},8714:(e,r,s)=>{s.r(r),s.d(r,{config:()=>c,default:()=>u,routeModule:()=>f});var t={};s.r(t),s.d(t,{default:()=>handler});var a=s(1802),i=s(7153),o=s(6249),n=s(3524),l=s(5668);let d=new n.PrismaClient;async function handler(e,r){await (0,l.Z)(e,r);let{userId:s}=e.query;if(!s)return r.status(400).json({message:"User ID is required."});if("GET"===e.method)try{let e=await d.profile.findFirst({where:{userId:parseInt(s)},select:{profilePrivacy:!0,emailNotifications:!0,mobilePushNotifications:!0,academicBackground:!0,researchInterests:!0,collegeInfo:!0,email:!0}});if(!e)return r.status(404).json({message:"Profile settings not found for the given userId."});r.status(200).json(e)}catch(e){console.error("Error fetching profile settings:",e),r.status(500).json({message:"Internal server error.",error:e.message})}else if("PUT"===e.method)try{let{profilePrivacy:t,emailNotifications:a,mobilePushNotifications:i,academicBackground:o,researchInterests:n,collegeInfo:l}=e.body,u=await d.profile.update({where:{userId:parseInt(s)},data:{profilePrivacy:t,emailNotifications:a,mobilePushNotifications:i,academicBackground:o,researchInterests:n,collegeInfo:l}});r.status(200).json({message:"Profile settings updated successfully.",updatedSettings:u})}catch(e){console.error("Error updating profile settings:",e),r.status(500).json({message:"Internal server error.",error:e.message})}else r.setHeader("Allow",["GET","PUT"]),r.status(405).json({message:`Method ${e.method} Not Allowed.`})}let u=(0,o.l)(t,"default"),c=(0,o.l)(t,"config"),f=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/settings",pathname:"/api/settings",bundlePath:"",filename:""},userland:t})},5668:(e,r,s)=>{s.d(r,{Z:()=>corsMiddleware});let t=require("cors");var a=s.n(t);let i=a()({origin:"*",methods:["GET","POST","PUT","DELETE","OPTIONS"],allowedHeaders:["Content-Type","Authorization"]});async function corsMiddleware(e,r){await new Promise((s,t)=>{i(e,r,e=>e instanceof Error?t(e):s(e))})}}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[222],()=>__webpack_exec__(8714));module.exports=s})();